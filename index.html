<!DOCTYPE html>
<html>
<head>
    <title>LogiTrace OCR</title>
    <style>
        body { font-family: sans-serif; padding: 40px; background: #f8f9fa; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        textarea { width: 100%; height: 80px; margin: 10px 0; }
        #json-output { background: #272822; color: #f8f8f2; padding: 15px; border-radius: 5px; white-space: pre-wrap; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>PaddleOCR-VL-1.5 Scanner</h2>
        <label>Extraction Prompt:</label>
        <textarea id="prompt">Extract the Invoice Number, Date, Total Weight, and Consignee. Return as JSON.</textarea>
        <input type="file" id="fileInput">
        <button onclick="upload()">Process Document</button>
        <div id="json-output">JSON results will appear here...</div>
    </div>
    <script>
        async function upload() {
            const file = document.getElementById('fileInput').files[0];
            const prompt = document.getElementById('prompt').value;
            const output = document.getElementById('json-output');
            if(!file) return alert("Select a file");

            output.innerText = "Processing on CPU (30-60s)...";
            const formData = new FormData();
            formData.append('file', file);
            formData.append('prompt', prompt);

            const res = await fetch('/scan', { method: 'POST', body: formData });
            const data = await res.json();
            output.innerText = JSON.stringify(data, null, 4);
        }
    </script>
</body>
</html>